<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Secure Admin | TE Logistics Movers</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">
<style>
body{font-family:Poppins;background:#0c1020;color:#fff;padding:40px}
.card{max-width:700px;margin:auto;background:#121a33;padding:30px;border-radius:15px}
input,select{width:100%;padding:14px;margin-top:12px;border:none;border-radius:8px}
button{width:100%;padding:14px;margin-top:15px;background:#0066ff;border:none;color:#fff;border-radius:8px}
</style>
</head>

<body>

<div class="card" id="login">
<h2>Secure Hidden Admin</h2>
<input id="pass" placeholder="Password">
<button id="loginBtn">Login</button>
</div>

<div class="card" id="panel" style="display:none">
<h2>Create / Edit Shipment</h2>

<input id="trackId" placeholder="Tracking ID (leave blank to generate)">
<input id="receiver" placeholder="Receiver">
<input id="location" placeholder="Current location">
<input id="address" placeholder="Address">
<input id="city" placeholder="City">
<input id="state" placeholder="State">
<input id="zip" placeholder="Zip">
<input id="date" placeholder="Date">
<input id="time" placeholder="Time">

<select id="status">
<option>Shipment Created</option>
<option>Processing</option>
<option>Pending Insurance</option>
<option>In Transit</option>
<option>Out for Delivery</option>
<option>Delivered</option>
</select>

<button id="saveBtn">Save Shipment</button>

<h3 id="msg"></h3>
</div>

<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyAzSMdTO_vFHOaI3PLMm6WU2ca2GaBZwnA",
  authDomain: "te-logistics-movers.firebaseapp.com",
  projectId: "te-logistics-movers",
  storageBucket: "te-logistics-movers.firebasestorage.app",
  messagingSenderId: "1076872105452",
  appId: "1:1076872105452:web:919c3f363dfebd896c84c9",
  measurementId: "G-GPVKBW8D8D"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const db = getDatabase(app);

// ===== LOGIN =====
document.getElementById('loginBtn').addEventListener('click', () => {
  const password = document.getElementById('pass').value;
  if(password === 'admin123'){
    document.getElementById('login').style.display = 'none';
    document.getElementById('panel').style.display = 'block';
  } else {
    alert('Incorrect password');
  }
});

// ===== SAVE SHIPMENT =====
document.getElementById('saveBtn').addEventListener('click', () => {
  const id = document.getElementById('trackId').value || 'TL'+Math.floor(Math.random()*999999999);
  const shipment = {
    receiver: document.getElementById('receiver').value,
    location: document.getElementById('location').value,
    address: document.getElementById('address').value,
    city: document.getElementById('city').value,
    state: document.getElementById('state').value,
    zip: document.getElementById('zip').value,
    status: document.getElementById('status').selectedIndex,
    date: document.getElementById('date').value,
    time: document.getElementById('time').value
  };
  set(ref(db,'shipments/'+id), shipment).then(()=>{
    document.getElementById('msg').innerText = 'Saved Tracking: ' + id;
  });
});
</script>

</body>
</html>
